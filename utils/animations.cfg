
# These macros all work basically the same way. The ID parameter is the name
# of the attack, the MISSILE_FRAME parameter is a missile frame to use, and the
# SOUND parameter is played when it hits (and currently when it misses as well).

#define INITIATE_MISSILE_ANIM ID MISSILE_FRAME SOUND
	[attack_anim]
		[filter_attack]
			name={ID}
		[/filter_attack]
		{MISSILE_FRAME}
		[frame]
			begin=-450
			end=-375
			image="units/elves-wood/initiate/initiate.png"
			halo=halo/elven/nature-halo1.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=-375
			end=-300
			image="units/elves-wood/initiate/initiate.png"
			halo=halo/elven/nature-halo2.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=-300
			end=-225
			image="units/elves-wood/initiate/initiate.png"
			halo=halo/elven/nature-halo3.png~
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=-225
			end=-150
			image="units/elves-wood/initiate/magic1.png"
			halo=halo/elven/nature-halo4.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=-150
			end=-75
			image="units/elves-wood/initiate/magic2.png"
			halo=halo/elven/nature-halo5.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=-75
			end=0
			image="units/elves-wood/initiate/magic1.png"
			halo=halo/elven/nature-halo6.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=-0
			end=50
			image="units/elves-wood/initiate/initiate.png"
			halo=halo/elven/nature-halo7.png
			halo_x,halo_y=0,-12
			sound={SOUND}
		[/frame]
		[frame]
			begin=50
			end=100
			image="units/elves-wood/initiate/initiate.png"
			halo=halo/elven/nature-halo8.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=100
			end=150
			image="units/elves-wood/initiate/initiate.png"
		[/frame]
	[/attack_anim]
#enddef

#define SHAMAN_MISSILE_ANIM ID MISSILE_FRAME SOUND
	[attack_anim]
		[filter_attack]
			name={ID}
		[/filter_attack]
		{MISSILE_FRAME}
		[frame]
			begin=-450
			end=-375
			image="units/elves-wood/shaman.png"
			halo=halo/elven/nature-halo1.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=-375
			end=-300
			image="units/elves-wood/shaman.png"
			halo=halo/elven/nature-halo2.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=-300
			end=-225
			image="units/elves-wood/shaman.png"
			halo=halo/elven/nature-halo3.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=-225
			end=-150
			image="units/elves-wood/shaman-attack2.png"
			halo=halo/elven/nature-halo4.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=-150
			end=-75
			image="units/elves-wood/shaman-attack2.png"
			halo=halo/elven/nature-halo5.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=-75
			end=0
			image="units/elves-wood/shaman-attack2.png"
			halo=halo/elven/nature-halo6.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=-0
			end=50
			image="units/elves-wood/shaman.png"
			halo=halo/elven/nature-halo7.png
			halo_x,halo_y=0,-12
			sound={SOUND}
		[/frame]
		[frame]
			begin=50
			end=100
			image="units/elves-wood/shaman.png"
			halo=halo/elven/nature-halo8.png
			halo_x,halo_y=0,-12
		[/frame]
		[frame]
			begin=100
			end=150
			image="units/elves-wood/shaman.png"
		[/frame]
	[/attack_anim]
#enddef

#define DRUID_MISSILE_ANIM ID MISSILE_FRAME SOUND
	[attack_anim]
		[filter_attack]
			name={ID}
		[/filter_attack]
		{MISSILE_FRAME}
        [frame]
            begin=-300
            end=-225
            image="units/elves-wood/druid-magic-1.png"
            halo="halo/elven/nature-halo1.png"
            halo_x,halo_y=0,-12
        [/frame]
        [frame]
            begin=-225
            end=-150
            image="units/elves-wood/druid-magic-2.png"
            halo="halo/elven/nature-halo2.png"
            halo_x,halo_y=0,-12
        [/frame]
        [frame]
            begin=-150
            end=-75
            image="units/elves-wood/druid-magic-3.png"
            halo="halo/elven/nature-halo3.png"
            halo_x,halo_y=0,-12
        [/frame]
        [frame]
            begin=-75
            end=0
            image="units/elves-wood/druid-magic-4.png"
            halo="halo/elven/nature-halo4.png"
            halo_x,halo_y=0,-12
        [/frame]
        [frame]
            begin=0
            end=75
            image="units/elves-wood/druid-magic-4.png"
            halo="halo/elven/nature-halo5.png"
            halo_x,halo_y=0,-12
            sound={SOUND}
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/elves-wood/druid-magic-3.png"
            halo="halo/elven/nature-halo6.png"
            halo_x,halo_y=0,-12
        [/frame]
        [frame]
            begin=150
            end=225
            image="units/elves-wood/druid-magic-2.png"
            halo="halo/elven/nature-halo7.png"
            halo_x,halo_y=0,-12
        [/frame]
        [frame]
            begin=225
            end=300
            image="units/elves-wood/druid-magic-1.png"
            halo="halo/elven/nature-halo8.png"
            halo_x,halo_y=0,-12
        [/frame]
	[/attack_anim]
#enddef

#define SHYDE_MISSILE_ANIM ID MISSILE_FRAME SOUND
	[attack_anim]
		[filter_attack]
			name={ID}
		[/filter_attack]
		{MISSILE_FRAME}
        [frame]
            begin=-450
            end=-375
            image="units/elves-wood/shyde-ftouch-attack3.png"
            halo=halo/elven/nature-halo1.png
            halo_x,halo_y=0,-12
        [/frame]
        [frame]
            begin=-375
            end=-300
            image="units/elves-wood/shyde-ftouch-attack3.png"
            halo=halo/elven/nature-halo2.png
            halo_x,halo_y=0,-12
        [/frame]
        [frame]
            begin=-300
            end=-225
            image="units/elves-wood/shyde-ftouch-attack3.png"
            halo=halo/elven/nature-halo3.png
            halo_x,halo_y=0,-12
        [/frame]
        [frame]
            begin=-225
            end=-150
            image="units/elves-wood/shyde-ftouch-attack3.png"
            halo=halo/elven/nature-halo4.png
            halo_x,halo_y=0,-12
        [/frame]
        [frame]
            begin=-150
            end=-75
            image="units/elves-wood/shyde-ftouch-attack3.png"
            halo=halo/elven/nature-halo5.png
            halo_x,halo_y=0,-12
        [/frame]
        [frame]
            begin=-75
            end=0
            image="units/elves-wood/shyde-ftouch-attack3.png"
            halo=halo/elven/nature-halo6.png
            halo_x,halo_y=0,-12
        [/frame]
        [frame]
            begin=-0
            end=75
            image="units/elves-wood/shyde-ftouch-attack3.png"
            halo=halo/elven/nature-halo7.png
            halo_x,halo_y=0,-12
            sound={SOUND}
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/elves-wood/shyde-ftouch-attack3.png"
            halo=halo/elven/nature-halo8.png
            halo_x,halo_y=0,-12
        [/frame]
	[/attack_anim]
#enddef

#define SORCERESS_MISSILE_ANIM ID MISSILE_FRAME SOUND
	[attack_anim]
		[filter_attack]
			name={ID}
		[/filter_attack]
		{MISSILE_FRAME}
        [frame]
            begin=-450
            end=-375
            image="units/elves-wood/sorceress-magic-1.png"
            halo=halo/elven/nature-halo1.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-375
            end=-300
            image="units/elves-wood/sorceress-magic-2.png"
            halo=halo/elven/nature-halo2.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-300
            end=-225
            image="units/elves-wood/sorceress-magic-3.png"
            halo=halo/elven/nature-halo3.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-225
            end=-150
            image="units/elves-wood/sorceress-magic-3.png"
            halo=halo/elven/nature-halo4.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-150
            end=-75
            image="units/elves-wood/sorceress-magic-3.png"
            halo=halo/elven/nature-halo5.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-75
            end=0
            image="units/elves-wood/sorceress-magic-3.png"
            halo=halo/elven/nature-halo6.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-0
            end=75
            image="units/elves-wood/sorceress-magic-2.png"
            halo=halo/elven/nature-halo7.png
            halo_x,halo_y=0,-28
            sound={SOUND}
        [/frame]
        [frame]
            begin=75
            end=150
            image="units/elves-wood/sorceress-magic-1.png"
            halo=halo/elven/nature-halo8.png
            halo_x,halo_y=0,-28
        [/frame]
	[/attack_anim]
#enddef

#define ENCHANTRESS_MISSILE_ANIM ID MISSILE_FRAME SOUND
	[attack_anim]
		[filter_attack]
			name={ID}
		[/filter_attack]
		{MISSILE_FRAME}
        [frame]
            duration=75
            image="units/elves-wood/enchantress-magic-1.png"
            halo=halo/elven/nature-halo1.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            duration=75
            image="units/elves-wood/enchantress-magic-2.png"
            halo=halo/elven/nature-halo2.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            duration=75
            image="units/elves-wood/enchantress-magic-2.png"
            halo=halo/elven/nature-halo3.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            duration=75
            image="units/elves-wood/enchantress-magic-2.png"
            halo=halo/elven/nature-halo4.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            duration=75
            image="units/elves-wood/enchantress-magic-2.png"
            halo=halo/elven/nature-halo5.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            duration=75
            image="units/elves-wood/enchantress-magic-2.png"
            halo=halo/elven/nature-halo6.png
            sound={SOUND}
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            duration=75
            image="units/elves-wood/enchantress-magic-2.png"
            halo=halo/elven/nature-halo7.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            duration=75
            image="units/elves-wood/enchantress-magic-1.png"
            halo=halo/elven/nature-halo8.png
            halo_x,halo_y=0,-28
        [/frame]
	[/attack_anim]
#enddef

#define SYLPH_MISSILE_ANIM ID MISSILE_FRAME SOUND
	[attack_anim]
		[filter_attack]
			name={ID}
		[/filter_attack]
		{MISSILE_FRAME}
        [frame]
            begin=-450
            end=-375
            image="units/elves-wood/sylph-magic.png"
            halo=halo/elven/faerie-fire-halo1.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-375
            end=-300
            image="units/elves-wood/sylph-magic.png"
            halo=halo/elven/faerie-fire-halo2.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-300
            end=-225
            image="units/elves-wood/sylph-magic.png"
            halo=halo/elven/faerie-fire-halo3.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-225
            end=-150
            image="units/elves-wood/sylph-magic.png"
            halo=halo/elven/faerie-fire-halo4.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-150
            end=-75
            image="units/elves-wood/sylph-magic.png"
            halo=halo/elven/faerie-fire-halo5.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-75
            end=0
            image="units/elves-wood/sylph-magic.png"
            halo=halo/elven/faerie-fire-halo6.png
            halo_x,halo_y=0,-28
        [/frame]
        [frame]
            begin=-0
            end=75
            image="units/elves-wood/sylph-magic.png"
            halo=halo/elven/faerie-fire-halo7.png
            halo_x,halo_y=0,-28
            sound={SOUND}
        [/frame]
	[/attack_anim]
#enddef

#define ELF_TELEPORT_ANIM UNIT PATHFUNC
    [animation]
        apply_to=pre_teleport
        start_time=-1200

        teleport_sparkle_1_start_time=-1200
        teleport_sparkle_2_start_time=-1000
        teleport_sparkle_3_start_time=-800

        [teleport_sparkle_1_frame]
            duration=800
            halo=misc/blank-hex.png:1,halo/teleport-9.png,halo/teleport-8.png,halo/teleport-1.png,halo/teleport-2.png,halo/teleport-3.png,halo/teleport-4.png,halo/teleport-5.png,halo/teleport-6.png,halo/teleport-7.png,halo/teleport-8.png,halo/teleport-9.png,misc/blank-hex.png:1
            halo_x=-10
            halo_y=30~-30
        [/teleport_sparkle_1_frame]
        [teleport_sparkle_2_frame]
            duration=800
            halo=misc/blank-hex.png:1,halo/teleport-9.png,halo/teleport-8.png,halo/teleport-1.png,halo/teleport-2.png,halo/teleport-3.png,halo/teleport-4.png,halo/teleport-5.png,halo/teleport-6.png,halo/teleport-7.png,halo/teleport-8.png,halo/teleport-9.png,misc/blank-hex.png:1
            halo_x=0
            halo_y=40~-40
        [/teleport_sparkle_2_frame]
        [teleport_sparkle_3_frame]
            duration=800
            halo=misc/blank-hex.png:1,halo/teleport-9.png,halo/teleport-8.png,halo/teleport-1.png,halo/teleport-2.png,halo/teleport-3.png,halo/teleport-4.png,halo/teleport-5.png,halo/teleport-6.png,halo/teleport-7.png,halo/teleport-8.png,halo/teleport-9.png,misc/blank-hex.png:1
            halo_x=10
            halo_y=30~-30
        [/teleport_sparkle_3_frame]

        [frame]
            duration=200
            image="units/elves-wood/{UNIT}/teleport-1.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-2.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-3.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-4.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-5.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-6.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-7.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-8.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=300
            image="misc/blank-hex.png"
        [/frame]
    [/animation]
    [animation]
        apply_to=post_teleport
        start_time=-1200

        teleport_sparkle_1_start_time=-1200
        teleport_sparkle_2_start_time=-1000
        teleport_sparkle_3_start_time=-800

        [teleport_sparkle_1_frame]
            duration=800
            halo=misc/blank-hex.png:1,halo/teleport-9.png,halo/teleport-8.png,halo/teleport-1.png,halo/teleport-2.png,halo/teleport-3.png,halo/teleport-4.png,halo/teleport-5.png,halo/teleport-6.png,halo/teleport-7.png,halo/teleport-8.png,halo/teleport-9.png,misc/blank-hex.png:1
            halo_x=10
            halo_y=-30~30
        [/teleport_sparkle_1_frame]
        [teleport_sparkle_2_frame]
            duration=800
            halo=misc/blank-hex.png:1,halo/teleport-9.png,halo/teleport-8.png,halo/teleport-1.png,halo/teleport-2.png,halo/teleport-3.png,halo/teleport-4.png,halo/teleport-5.png,halo/teleport-6.png,halo/teleport-7.png,halo/teleport-8.png,halo/teleport-9.png,misc/blank-hex.png:1
            halo_x=0
            halo_y=-40~40
        [/teleport_sparkle_2_frame]
        [teleport_sparkle_3_frame]
            duration=800
            halo=misc/blank-hex.png:1,halo/teleport-9.png,halo/teleport-8.png,halo/teleport-1.png,halo/teleport-2.png,halo/teleport-3.png,halo/teleport-4.png,halo/teleport-5.png,halo/teleport-6.png,halo/teleport-7.png,halo/teleport-8.png,halo/teleport-9.png,misc/blank-hex.png:1
            halo_x=-10
            halo_y=-30~30
        [/teleport_sparkle_3_frame]
        [frame]
            duration=300
            image="misc/blank-hex.png"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-8.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-7.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-6.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-5.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-4.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-3.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/{UNIT}/teleport-2.png{PATHFUNC}"
        [/frame]
        [frame]
            duration=200
            image="units/elves-wood/{UNIT}/teleport-1.png{PATHFUNC}"
        [/frame]
    [/animation]
#enddef

#define INITIATE_DAGGER_ANIM
    [attack_anim]
        [filter_attack]
            name=dagger
        [/filter_attack]
        [frame]
            begin=-175
            end=-100
            image="units/elves-wood/initiate/initiate.png"
        [/frame]
		[frame]
			begin=-100
			end=100
			image="units/elves-wood/initiate/attack.png"
		[/frame]
        {SOUND:HIT_AND_MISS {SOUND_LIST:SWORD_SWISH} {SOUND_LIST:MISS} -100}
        [frame]
            begin=100
            end=175
            image="units/elves-wood/initiate/initiate.png"
        [/frame]
    [/attack_anim]
#enddef

#define SHAMAN_DAGGER_ANIM
    [attack_anim]
        [filter_attack]
            name=dagger
        [/filter_attack]
        [frame]
            begin=-175
            end=-100
            image="units/elves-wood/shaman.png"
        [/frame]
		[frame]
			begin=-100
			end=100
			image="units/elves-wood/shaman-attack.png"
		[/frame]
        {SOUND:HIT_AND_MISS {SOUND_LIST:SWORD_SWISH} {SOUND_LIST:MISS} -100}
        [frame]
            begin=100
            end=175
            image="units/elves-wood/shaman.png"
        [/frame]
    [/attack_anim]
#enddef

#define DRUID_DAGGER_ANIM
    [attack_anim]
        [filter_attack]
            name=dagger
        [/filter_attack]
        [frame]
            begin=-175
            end=-100
            image="units/elves-wood/druid.png"
        [/frame]
		[frame]
			begin=-100
			end=100
			image="units/elves-wood/druid-attack.png"
		[/frame]
        {SOUND:HIT_AND_MISS {SOUND_LIST:SWORD_SWISH} {SOUND_LIST:MISS} -100}
        [frame]
            begin=100
            end=175
            image="units/elves-wood/druid.png"
        [/frame]
    [/attack_anim]
#enddef

#define SHYDE_DAGGER_ANIM
    [attack_anim]
        [filter_attack]
            name=dagger
        [/filter_attack]
        [frame]
            begin=-200
            end=-100
            image="units/elves-wood/shyde-ftouch-attack1.png"
        [/frame]
        [frame]
            begin=-100
            end=100
            image="units/elves-wood/shyde-ftouch-attack2.png"
        [/frame]
        {SOUND:HIT_AND_MISS {SOUND_LIST:SWORD_SWISH} {SOUND_LIST:MISS} -100}
        [frame]
            begin=100
            end=200
            image="units/elves-wood/shyde-ftouch-attack3.png"
        [/frame]
    [/attack_anim]
#enddef

#define SORCERESS_DAGGER_ANIM
    [attack_anim]
        [filter_attack]
            name=dagger
        [/filter_attack]
        start_time=-350
        offset=0.0~-0.25:150,-0.25~0.1:100,0.1~0.5:250,0.5~0.6:100, 0.6~0.6:150,0.6~0.15:200,0.15~0.0:150

        [frame]
            duration=80
            image="units/elves-wood/sorceress-melee-attack-1.png"
        [/frame]
        [frame]
            duration=80
            image="units/elves-wood/sorceress-melee-attack-2.png"
        [/frame]
        [frame]
            duration=80
            image="units/elves-wood/sorceress-melee-attack-3.png"
        [/frame]
        [frame]
            duration=80
            image="units/elves-wood/sorceress-melee-attack-4.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                duration=80
                image="units/elves-wood/sorceress-melee-attack-5.png"
                sound={SOUND_LIST:SWORD_SWISH}
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                duration=80
                image="units/elves-wood/sorceress-melee-attack-5.png"
                sound={SOUND_LIST:MISS}
            [/frame]
        [/else]
        [frame]
            duration=100
            image="units/elves-wood/sorceress-melee-attack-6.png"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/sorceress-melee-attack-7.png"
        [/frame]
        #600
        [frame]
            duration=80
            image="units/elves-wood/sorceress-melee-attack-8.png"
        [/frame]
        [frame]
            duration=80
            image="units/elves-wood/sorceress-melee-attack-9.png"
        [/frame]
        [frame]
            duration=80
            image="units/elves-wood/sorceress-melee-attack-10.png"
        [/frame]
        [frame]
            duration=80
            image="units/elves-wood/sorceress-melee-attack-1.png"
        [/frame]
        [frame]
            duration=80
            image="units/elves-wood/sorceress-melee-attack-2.png"
        [/frame]
    [/attack_anim]
#enddef

#define ENCHANTRESS_DAGGER_ANIM
    [attack_anim]
        [filter_attack]
            name=dagger
        [/filter_attack]
        offset=0.0~0.3,0.3~0.45,0.45~0.3,0.3~0.0
        start_time=-250
        [frame]
            duration=90
            image="units/elves-wood/enchantress-melee-1.png"
        [/frame]
        [frame]
            duration=90
            image="units/elves-wood/enchantress-melee-2.png"
        [/frame]
        [if]
            hits=yes
            [frame]
                duration=100
                image="units/elves-wood/enchantress-melee-3.png"
                sound={SOUND_LIST:SWORD_SWISH}
            [/frame]
        [/if]
        [else]
            hits=no
            [frame]
                duration=100
                image="units/elves-wood/enchantress-melee-3.png"
                sound={SOUND_LIST:MISS}
            [/frame]
        [/else]
        [frame]
            duration=100
            image="units/elves-wood/enchantress-melee-4.png"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/enchantress-melee-5.png"
        [/frame]
        [frame]
            duration=100
            image="units/elves-wood/enchantress-melee-6.png"
        [/frame]
    [/attack_anim]
#enddef

#define SYLPH_DAGGER_ANIM
    [attack_anim]
        [filter_attack]
            name=dagger
        [/filter_attack]
        [frame]
            begin=-200
            end=-100
            image="units/elves-wood/sylph-magic.png"
        [/frame]
        [frame]
            begin=-100
            end=100
            image="units/elves-wood/sylph-melee.png"
        [/frame]
        {SOUND:HIT_AND_MISS {SOUND_LIST:SWORD_SWISH} {SOUND_LIST:MISS} -100}
        [frame]
            begin=100
            end=200
            image="units/elves-wood/sylph-magic.png"
        [/frame]
    [/attack_anim]
#enddef

#define FREEZING_STAFF_ANIM
	[attack_anim]
		[filter_attack]
			name=freezingstorm
		[/filter_attack]
		{MISSILE_FRAME_ICE}
	[/attack_anim]
	[attack_anim]
		[filter_attack]
			name=freezingstaff
		[/filter_attack]
		# This frame is what the engine would default to if nothing was provided
		[frame]
			offset="0~0.6:150,0.6~0:150"
		[/frame]
		# This copies MISSILE_FRAME_ICE and slightly tweaks it
		[if]
			hits=yes
			[missile_frame]
				begin=-100 # This line is the only difference
				end=0
				image="projectiles/whitemissile-n.png"
				image_diagonal="projectiles/whitemissile-ne.png"
				sound=magicmissile.wav
				offset=0.8 # This line is the only difference
			[/missile_frame]
			[missile_frame]
				begin=0
				end=50
				halo="projectiles/whitemissile-impact-1.png"
				offset=0.8
			[/missile_frame]
			[missile_frame]
				begin=50
				end=100
				halo="projectiles/whitemissile-impact-2.png"
				offset=0.92
			[/missile_frame]
			[missile_frame]
				begin=100
				end=150
				halo="projectiles/whitemissile-impact-3.png"
				offset=0.94
			[/missile_frame]
			[missile_frame]
				begin=150
				end=200
				halo="projectiles/whitemissile-impact-4.png"
				offset=0.96
			[/missile_frame]
			[missile_frame]
				begin=200
				end=250
				halo="projectiles/whitemissile-impact-5.png"
				offset=0.98
			[/missile_frame]
			[missile_frame]
				begin=250
				end=300
				halo="projectiles/whitemissile-impact-6.png"
				offset=1.0
			[/missile_frame]
			[missile_frame]
				begin=300
				end=350
				halo="projectiles/whitemissile-impact-7.png"
				offset=1.02
			[/missile_frame]
			[missile_frame]
				begin=350
				end=400
				halo="projectiles/whitemissile-impact-8.png"
				offset=1.04
			[/missile_frame]
		[/if]
		[else]
			hits=no
			[missile_frame]
				begin=-200
				end=0
				image="projectiles/whitemissile-n.png"
				image_diagonal="projectiles/whitemissile-ne.png"
				sound=magicmissile.wav
				offset=0.0~0.8
				alpha=.8~0.0:200
			[/missile_frame]
		[/else]
	[/attack_anim]
#enddef

#define SOUL_SUCKING_ANIM BASE
	[attack_anim]
		[filter_attack]
			name=shadow drain
			range=ranged
		[/filter_attack]
		base_score=10
		# This part copied from the eyestalk
		[missile_frame]
			begin=0
			end=300
			halo="halo/elven/ice-halo1.png:50,halo/elven/ice-halo2.png:50,halo/elven/ice-halo3.png:50,halo/elven/ice-halo4.png:50,halo/elven/ice-halo5.png:50,halo/elven/ice-halo6.png:50"
			offset=1.0~0.0:300
		[/missile_frame]
		# The rest of this animation copied from the necromancer
		[frame]
			begin=-300
			end=-225
			image="units/undead-necromancers/{BASE}-magic-1.png"
		[/frame]
		[frame]
			begin=-225
			end=-150
			image="units/undead-necromancers/{BASE}-magic-2.png"
		[/frame]
		[frame]
			begin=-150
			end=-75
			image="units/undead-necromancers/{BASE}-magic-3.png"
			halo=halo/undead/black-magic-1.png
		[/frame]
		[if]
			hits=yes
			[frame]
				begin=-75
				end=0
				image="units/undead-necromancers/{BASE}-magic-3.png"
				sound=magic-dark.ogg
				halo=halo/undead/black-magic-2.png
			[/frame]
		[/if]
		[else]
			hits=no
			[frame]
				begin=-75
				end=0
				image="units/undead-necromancers/{BASE}-magic-3.png"
				sound=magic-dark-miss.ogg
				halo=halo/undead/black-magic-2.png
			[/frame]
		[/else]
		[frame]
			begin=0
			end=75
			image="units/undead-necromancers/{BASE}-magic-3.png"
			halo=halo/undead/black-magic-3.png
		[/frame]
		[frame]
			begin=75
			end=150
			image="units/undead-necromancers/{BASE}-magic-3.png"
			halo=halo/undead/black-magic-4.png
		[/frame]

		[frame]
			begin=150
			end=200
			image="units/undead-necromancers/{BASE}-magic-3.png"
			halo=halo/undead/black-magic-5.png
		[/frame]
		[frame]
			begin=200
			end=250
			image="units/undead-necromancers/{BASE}-magic-2.png"
		[/frame]
		[frame]
			begin=250
			end=300
			image="units/undead-necromancers/{BASE}-magic-1.png"
		[/frame]
	[/attack_anim]
#enddef

#define HOLY_AURA_ANIM
	[animation]
		apply_to=resistance
		[frame]
			duration=25
			halo=halo/elven/elven-shield-halo-20pct.png
		[/frame]
		[frame]
			duration=25
			halo=halo/elven/elven-shield-halo-40pct.png
		[/frame]
		[frame]
			duration=50
			halo=halo/elven/elven-shield-halo-60pct.png
		[/frame]
		[frame]
			duration=50
			halo=halo/elven/elven-shield-halo-80pct.png
		[/frame]
		[frame]
			duration=100
			halo=halo/elven/elven-shield-halo-100pct.png
		[/frame]
		[frame]
			duration=50
			halo=halo/elven/elven-shield-halo-80pct.png
		[/frame]
		[frame]
			duration=25
			halo=halo/elven/elven-shield-halo-60pct.png
		[/frame]
		[frame]
			duration=25
			halo=halo/elven/elven-shield-halo-40pct.png
		[/frame]
		[frame]
			duration=25
			halo=halo/elven/elven-shield-halo-20pct.png
		[/frame]
	[/animation]
#enddef

#define EFFECT_ADD_ANIM TYPE ANIM_WML
	[effect]
		[filter]
			type={TYPE}
		[/filter]
		apply_to=new_animation
		{ANIM_WML}
	[/effect]
#enddef